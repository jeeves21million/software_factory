version: v1.2.0
initial_stage: intake
terminal_stages: [post_release_validation]
allowed_transitions:
  intake:
    - design_research
    - design_brand
    - design_brief
    - architecture
  design_research:
    - design_brand
    - design_brief
  design_brand:
    - design_brief
  design_brief:
    - design_direction
  design_direction:
    - design
  design:
    - design_critique
  design_critique:
    - architecture
    - design_direction
  architecture:
    - implementation
  implementation:
    - testing
  testing:
    - validation
  validation:
    - release
    - fix_loop
  fix_loop:
    - testing
  release:
    - post_release_validation
  post_release_validation: []
routing:
  startup_default:
    next_stage: design_research
    next_agent: ui_research_agent
  startup_no_brand_assets:
    next_stage: design_brand
    next_agent: brand_foundation_agent
  startup_skip_research:
    next_stage: design_brief
    next_agent: design_brief_agent
  design_critique_fail:
    next_stage: design_direction
    next_agent: design_creative_director_agent
  design_critique_pass:
    next_stage: architecture
    next_agent: solution_arch_agent
  enterprise_existing_design_system:
    next_stage: architecture
    next_agent: solution_arch_agent
  validation_fail:
    next_stage: fix_loop
    next_agent: bugfix_agent
  validation_pass:
    next_stage: release
    next_agent: release_agent
